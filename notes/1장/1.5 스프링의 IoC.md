## 1.5 스프링의 IoC

\- 스프링의 핵심 : **빈 팩토리 or 애플리케이션 컨텍스트**

### 1.5.1 오브젝트 팩토리를 이용한 스프링 IoC

#### 애플리케이션 컨텍스트와 설정정보

\- 빈

-   스프링이 제어권을 가지고 직접 만들고 관계를 부여하는 오브젝트
-   스프링 컨테이너가 **생성과 관계설정, 사용 등을 제어해주는 제어의 역전 적용**된 오브젝트

\- 빈 팩토리

-   **빈의 생성과 관계설정 같은 제어**를 담당하는 IoC 오브젝트
-   보통 빈 팩토리보다는 이를 확장한 **애플리케이션 컨텍스트**를 주로 사용

\- 애플리케이션 컨텍스트

-   IoC 방식에 따라 만들어진 일종의 빈 팩토리
-   애플리케이션 전반에 걸쳐 모든 구성요소의 제어 작업을 담당하는 IoC 엔진
-   별도의 정보를 참고해서 빈(오브젝트)의 생성, 관계설정 등의 제어 작업 총괄
-   별도로 설정정보를 담고 있는 무엇인가를 가져와 이를 활용하는 범용적인 IoC 엔진

\- 설계도 = 애플리케이션 컨텍스트와 그 설정 정보

-   IoC 방식을 이용해 애플리케이션 컴포넌트 생성 및 사용할 관계 맺어주는 등의 책임 담당

#### DaoFactory를 사용하는 애플리케이션 컨텍스트

\- @Configuration

-   스프링이 빈 팩토리를 위한 오브젝트 설정을 담당하는 클래스
-   설정정보로 사용하려면 AnnotationConfigApplicationContext 이용
-   ApplicationContext의 getBean()이라는 메서드로 빈 오브젝트 가져올 수 있음

```
ApplicationContext context = new AnnotationConfigApplicationContext(DaoFactory.class);
UserDao userDao = context.getBean("userDao", UserDao.class);
```

\- getBean의 파라미터인 "userDao"는 ApplicationContext에 등록된 빈 이름

-   @Bean 메서드 이름이 빈의 이름이 됨
-   왜 굳이 이름을 사용할까? 빈을 생성하는 방식이나 구성을 다르게 가져가는 메서드를 추가할 수 있기 때문

### 1.5.2 애플리케이션 컨텍스트의 동작 방식

\- 오브젝트 팩토리에 대응되는 것이 **스프링 애플리케이션 컨텍스트**(IoC 컨테이너 or 스프링 컨테이너 or 빈 팩토리)

\- 애플리케이션 컨텍스트

-   애플리케이션에서 IoC를 적용해서 관리할 모든 오브젝트에 대한 생성과 관계설정 담당
-   생성 정보와 연관관계 정보는 별도의 설정정보를 통해 얻음
-   때로는 외부의 오브젝트 팩토리에 작업 위임

\- @Configuration이 붙은 DaoFactory는 애플리케이션 컨텍스트가 활용하는 IoC 설정정보

-   애플리케이션 컨텍스트가 DaoFactory의 userDao() 메서드를 호출해서 오브젝트로 가져온 것을 클라이언트가 getBean()으로 요청할 떄 전달해줌

\- 애플리케이션 컨텍스트 동작 방식

1.  애플리케이션 컨텍스트는 DaoFactory 클래스를 설정정보로 등록해두고 @Bean이 붙은 메서드 이름을 가져와 빈 목록을 만듦
2.  클라이언트가 애플리케이션 컨텍스트의 getBean() 메서드를 호출하면 자신의 빈 목록에서 요청한 이름이 있는지 찾고, 있다면 빈을 생성하는 메서드를 호출해서 오브젝트 생성시킨 후 클라이언트에 돌려줌

\- 애플리케이션 컨텍스트의 장점

-   클라이언트는 구체적인 팩토리 클래스를 알 필요 X
    -   오브젝트 팩토리가 아무리 많아져도 이를 알아야 하거나 직접 사용할 필요X
    -   일관된 방식으로 원하는 오브젝트를 가져올 수 있음
-   종합 IoC 서비스 제공
-   빈을 검색하는 다양한 방법 제공
    -   빈 이름이나 타입, 특별한 애노테이션 설정을 통해 빈을 찾을 수 있음

### 1.5.3 스프링 IoC 용어 정리

#### 빈bean

\- 스프링이 IoC 방식으로 관리하는 오브젝트

\- **스프링이 직접 그 생성과 제어를 담당하는 오브젝트만**을 빈이라고 부름

#### 빈 팩토리bean factory

\- 스프링의 IoC 담당하는 핵심 컨테이너

\- 빈 등록, 생성, 조회하고 돌려주고, 그 외에 부가적인 빈 관리 기능 담당

\- 보통은 이를 확장한 애플리케이션 컨텍스트 이용

#### 애플리케이션 컨텍스트application context

\- 빈 팩토리를 확장한 IoC 컨테이너

\- 스프링이 제공하는 각종 부가 서비스 추가 제공

#### 설정정보/설정 메타정보configuration metadata

\- 애플리케이션 컨텍스트 또는 빈 팩토리가 IoC를 적용하기 위해 사용하는 메타정보

\- IoC 컨테이너에 의해 관리되는 애플리케이션 오브젝트를 생성하고 구성할 때 사용

#### 컨테이너container 또는 IoC 컨테이너

\- IoC 방식으로 빈 관리한다는 의미에서 애플리케이션 컨텍스트나 빈 팩토리를 컨테이너 또는 IoC 컨테이너라고 함

\- 컨테이너라는 말 자체가 IoC 개념을 담고 있음

\- 애플리케이션 컨텍스트는 그 자체로 ApplicationContext 인터페이스를 구현한 오브젝트를 가리키기도 함. 애플리케이션 컨텍스트 오브젝트는 하나의 애플리케이션에서 보통 여러 개가 만들어져 사용됨

#### 스프링 프레임워크

\- IoC 컨테이너, 애플리케이션 컨텍스트를 포함해서 스프링이 제공하는 모든 기능을 통틀어 말할 때 주로 사용